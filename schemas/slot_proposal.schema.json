{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://regulatoryos.io/schemas/slot_proposal.schema.json",
  "title": "SlotProposal",
  "description": "Schema for validating agent-generated slot proposals for PSUR sections",
  "type": "object",
  "properties": {
    "slotId": {
      "type": "string",
      "minLength": 1,
      "description": "Unique identifier for the slot being filled (e.g., 'C.1.1', 'D.2.3')"
    },
    "templateId": {
      "type": "string",
      "minLength": 1,
      "description": "Template this slot belongs to (e.g., 'FormQAR-054_C', 'MDCG_2022_21_ANNEX_I')"
    },
    "content": {
      "type": "string",
      "description": "Generated content for the slot"
    },
    "evidenceAtomIds": {
      "type": "array",
      "items": {
        "type": "integer",
        "minimum": 1
      },
      "minItems": 1,
      "description": "IDs of evidence atoms used to generate this proposal - REQUIRED for traceability"
    },
    "claimedObligationIds": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "minItems": 1,
      "description": "Obligation IDs this proposal claims to satisfy - REQUIRED for compliance tracking"
    },
    "methodStatement": {
      "type": "string",
      "minLength": 10,
      "description": "Explanation of how evidence was used to generate content - REQUIRED for auditability"
    },
    "transformations": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of transformations applied to evidence data"
    },
    "confidenceScore": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Agent's confidence in this proposal (0-1)"
    },
    "psurCaseId": {
      "type": "integer",
      "description": "PSUR case this proposal belongs to"
    },
    "status": {
      "type": "string",
      "enum": ["pending", "accepted", "rejected", "needs_review"],
      "default": "pending",
      "description": "Current status of the proposal"
    }
  },
  "required": ["slotId", "templateId", "evidenceAtomIds", "claimedObligationIds", "methodStatement"],
  "additionalProperties": true
}
